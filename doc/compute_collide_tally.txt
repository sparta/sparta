"SPARTA WWW Site"_sws - "SPARTA Documentation"_sd - "SPARTA Commands"_sc :c

:link(sws,http://sparta.sandia.gov)
:link(sd,Manual.html)
:link(sc,Section_commands.html#comm)

:line

compute collision/tally command :h3

[Syntax:]

compute ID collision/tally group-ID mix-ID value1 value2 ... :pre

ID is documented in "compute"_compute.html command :ulb,l
collision/tally = style name of this compute command :l
group-ID = group ID for which surface elements to perform calculation on :l
mix-ID = mixture ID to perform calculation on :l
one or more values can be appended :l
value = {id} or {type} or {id/surf} or {time} or {xc} or {yc} or {zc} or {vx/pre} or {vy/pre} or {vz/pre} or {vx/post} or {vy/post} or {vz/post} :l
  {id} = particle ID
  {type} = particle type
  {id/surf} = surface element ID
  {time} = time of collision (within timestep, see below)
  {xc}, {yc}, {zc} = coordinates of collision point
  {vx/pre}, {vy/pre}, {vz/pre} = velocity components before collision
  {vx/post}, {vy/post}, {vz/post} = velocity components after collision :pre
:ule

[Examples:]

compute 1 collision/tally all all id id/surf time xc yc zc :pre

This command will dump the tallies in the previous command to a dump
file every 10 steps:

dump 1 tally all 10 tmp.tally c_1\[*\] :pre

[Description:]

Tally various values for each collision of a particle with a surface
element during the current timestep.  Only surface collisions which do
not result in chemical reactions are tallied by this command.  See the
related "compute reaction/tally"_compute_reaction_tally.html command
to tally reactions.  It provides different tally value options than
this compute.

Only surface elements in the surface group specified by {group-ID} and
particles with species in the mixture specified by {mix-ID} are
included.  See the "group grid"_group.html command for info on how
surface elements can be assigned to surface groups.

This compute can be used for simulations with either explicit or
implicit surface elements.  See "Section 6.13"_Section_howto_13 for
more discussion of explicit and implicit surfaces.

The results of this compute can be used by different commands in
different ways.  The values for a single timestep can be output by the
"dump tally"_dump.html command.  Currenlty this is the only option for
accessing the tallied values.

:line

The {id} value is the ID of the particle.  Note that particle
IDs are generated randomly.  Thus multiple particles in the system can
potentially have the same ID.  See "Section 6.17"_Section_howto_17 for
more details on particle IDs.

The {type} value is the integer index for the particle species.  It is
a value from 1 to Nspecies. The value corresponds to the order in
which species were defined via the "species"_species.html command.
See "Section 6.17"_Section_howto_17 for more details on particle
types.

The {id/surf} value is the ID of the surface element.  For explicit
surfaces, surface element IDs are unique.  For implicit surfaces, the
surface ID of all the surface elements within a grid cell are the grid
cell ID.  See "Section 6.13"_Section_howto_13 for more discussion of
explicit and implicit surfaces.

The {time} value is the point in time within the timestep when the
collision occured.  Thus if the timestep size is DT, as set by the
"timestep"_timestep.html command, the {time} values will all be within
the range of 0.0 to DT, for all collisions tallied by this compute on
each timestep it is invoked.

The {xc}, {yc}, and {zc} are the coordinates of the collision point
between the particle and the surface element.

The {vx/pre}, {vy/pre}, {vz/pre} values are the velocity components of
the incident particle before it collides with the surface element.

The {vx/post}, {vy/post}, {vz/post} values are the velocity components
of the particle after it collides with the surface element.

:line

[Output info:]

This compute calculates a per-tally array, with the number of columns
equal to the number of values.

The array can be accessed by any command that uses per-tally values
from a compute as input.  See "Section 6.4"_Section_howto.html#howto_4
for an overview of SPARTA output options.

The per-tally array values will be in the "units"_units.html
appropriate to the individual values as described above.  {Time} is in
time units; see above for details.  {Xc}, {yc}, and {zc} are in
distance units.  {Vx/pre}, {vy/pre}, {vz/pre} are in velocity units, as
are {vx/post}, {vy/post}, {vz/post}.

:line

[Restrictions:] none

[Related commands:]

"compute reaction/tally"_compute_reaction_tally.html, "dump tally"_dump.html

[Default:] none

